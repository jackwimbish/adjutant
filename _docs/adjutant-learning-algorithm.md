# The Adjutant Adaptive Learning Algorithm

The core of Adjutant's intelligence lies in its adaptive learning algorithm, a dual-process system designed to develop a deep, long-term understanding of the user's content preferences. The system is composed of two distinct but interconnected workflows: the **Preference Profile Generation Workflow (The "Learner")** and the **Adaptive Scoring Workflow (The "Scorer")**.

## 1. The Preference Profile Generation Workflow (The "Learner")

This workflow runs periodically in the background (e.g., once every 24 hours) with the sole purpose of analyzing the user's recent feedback to create a rich, descriptive model of their tastes.

### Inputs

1. **Recent User Feedback**: The workflow queries the database for a sample of the most recent articles the user has marked as "relevant" or "not relevant". It uses the AI-generated summaries of these articles to provide deep contextual understanding of the feedback.

2. **The Existing Profile**: To ensure long-term memory and prevent drastic shifts, the workflow also fetches the user's previously generated preference profile.

### Process (Orchestrated by LangGraph)

1. **Evolutionary Analysis**: The summaries of the user's feedback and their existing profile are sent to a powerful LLM (e.g., GPT-4o). The AI is instructed not to create a new profile from scratch, but to **evolve** the existing one based on the new data.

2. **Feature Extraction**: The LLM's task is to identify and articulate nuanced features of the content. It generates descriptive phrases rather than simple keywords.

3. **Resilience**: This entire process is wrapped in a LangGraph graph, which validates the AI's output to ensure it's a well-formed JSON object and retries the process if it fails, ensuring the profile is never corrupted.

### Output

The workflow produces and stores a single JSON object in the database representing the user's updated profile. This "Feature-Based Profile" contains:

- An array of `likes` (e.g., "Technical tutorials about specific libraries like PyTorch or JAX")
- An array of `dislikes` (e.g., "Opinion pieces about market trends or company politics")
- A `changelog` field where the AI explains its reasoning for the changes made to the profile
- A `last_updated` timestamp

## 2. The Adaptive Scoring Workflow (The "Scorer")

This workflow runs frequently as new articles are fetched from external sources. Its purpose is to analyze each new article through the lens of the user's personalized profile.

### Inputs

1. **A New, Unprocessed Article**: The full text content of a newly discovered article.

2. **The User's Preference Profile**: Before analysis, the workflow fetches the latest user profile object generated by the Learner.

### Process (Orchestrated by LangGraph)

1. **Triage**: A quick, low-cost AI call first determines if the article is broadly on-topic based on user settings. If not, it's discarded.

2. **Augmented Analysis**: If the article is on-topic, its content is sent to the LLM. The prompt is dynamically "augmented" with the full lists of `likes` and `dislikes` from the user's profile.

3. **Personalized Scoring**: The AI is instructed to generate a relevance score from 1-10 based specifically on how well the article matches the user's "likes" and avoids their "dislikes".

### Output

The workflow saves the article to the database with a highly personalized `ai_score` that is used to rank the article in the user's feed.

## The Continuous Improvement Loop

These two workflows create a virtuous cycle:

1. The **Scorer** uses the profile to rank new articles.
2. The user provides feedback on these articles.
3. The **Learner** analyzes this new feedback to refine the profile.
4. The **Scorer** then uses this newly-refined profile for future articles, leading to a system that grows progressively more in tune with the user's tastes over time.

## Algorithm Benefits

### Deep Understanding
Unlike simple keyword-based filtering, this system develops nuanced understanding of content preferences through natural language processing and feature extraction.

### Long-term Memory
The evolutionary approach to profile updates ensures that the system maintains consistency while adapting to changing preferences, preventing sudden shifts that could disrupt the user experience.

### Resilient Architecture
LangGraph orchestration provides robust error handling and retry mechanisms, ensuring the learning process continues even when individual API calls fail.

### Scalable Personalization
The dual-workflow architecture allows for efficient processing of high-volume article streams while maintaining sophisticated personalization for each user.

## Technical Implementation

The algorithm leverages several key technologies:

- **LangGraph**: Provides workflow orchestration and resilience
- **GPT-4o**: Powers the natural language understanding and feature extraction
- **Firebase Firestore**: Stores user profiles and article data with real-time synchronization
- **TypeScript**: Ensures type safety throughout the learning pipeline

This sophisticated approach to content personalization sets Adjutant apart from traditional RSS readers and news aggregators by creating a truly adaptive, intelligent content curation system.